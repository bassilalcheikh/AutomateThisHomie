<!DOCTYPE html>
<html lang="en">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta charset="utf-8" /><script type="text/javascript">window.NREUM||(NREUM={});NREUM.info = {"beacon":"","errorBeacon":"bam.nr-data.net","licenseKey":"","applicationID":"","transactionName":"ZlRXYUIHWUoEAkJYCV8ecVpEKFJNJg5YRRReXVlQQkl/VggEGXgIVVRN","queueTime":0,"applicationTime":9,"ttGuid":"C63F80399FE4EFD7","agent":""}</script><script type="text/javascript"></script>
        <meta name="viewport" content="width=device-width" />
        <title>DialIQ Dashboard</title>
        <link rel="stylesheet" type="text/css" href="/bundles/common/css?v=wYUlQoSrJbenMO_jLLkXjeozs_DBRCDM_OTYcYU53R41"/>

        <script src="/Scripts/thirdparty/jquery/jquery-2.1.3.js"></script>
<script src="/Scripts/thirdparty/jquery/jquery-ui-1.11.0.js"></script>
<script src="/Scripts/thirdparty/signalr/jquery.signalR.js"></script>
<script src="/Scripts/thirdparty/signalr/ab-signalr-connection.js"></script>
<script src="/Scripts/thirdparty/signalr/ab-signalr-hubs.js"></script>
<script src="/Scripts/thirdparty/signalr/mediator.js"></script>

    </head>
    <body>
        <nav class="navbar navbar-inverse" ng-hide="hideMenu">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#site-menu" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#/home">DialIq Dashboard</a>
            </div>
            <div class="collapse navbar-collapse navbar-inverse-collapse" id="site-menu">
                <ul class="nav navbar-nav">
                    <li class="inverse-dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                            System Status <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a ng-href="#/DialiqStatus">Dialiq Health</a></li>
                            <li><a ng-href="#/AgentBridgeStatus">AgentBridge</a></li>
                            <li><a ng-href="#/ServiceStatus">Services</a></li>
                        </ul>
                    </li>
                    <li class="inverse-dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                            System Performance <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a ng-href="#/home">Calls</a></li>
                            <li><a ng-href="#/DialIqResponseTime">Timings</a></li>
                        </ul>
                    </li>
                    <li class="inverse-dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                            Logs <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a ng-href="#/CallLog">Calls</a></li>
                            <li><a ng-href="#/Distribution">Distribution by Lead</a></li>
                            <li><a ng-href="#/agent/distribution/">Distribution by Agent</a></li>
                            <li><a ng-href="#/recipientquerysummary">Call Queue</a></li>
                            <li><a ng-href="#/StuckAgents">Stuck Agents</a></li>
                            <li><a ng-href="#/AgentStates">Agents State</a></li>
                            <li><a ng-href="#/AgentStatus">Agents Status</a></li>
                        </ul>
                    </li>
                    <li class="inverse-dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                            Configuration <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a ng-href="#/ClientConfiguration">Clients</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="https://velocify.atlassian.net/wiki/display/PM/Dial-IQ+Dashboard+Documentation">
                            Help
                        </a>
                    </li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                        <li>
                            <p class="navbar-text">
                                Hi, Velocify1
                            </p>
                        </li>
                        <li>
<form action="/LogOff" id="logoutForm" method="post"><input name="__RequestVerificationToken" type="hidden" value="OHpc50PtUotqugBW7l9RTb2nXjIMOwCl7rkhuMDN-JAZJ8hlVGaMW96-ugmrPRdMCQ2rmzFmQFtxEheH0" /></form>                            <a type="submit" href="javascript:document.getElementById('logoutForm').submit()">Log off</a>
                        </li>
                        <li>
                            <p  class="navbar-text">Version:  3.6.0.18</p>
                        </li>
                </ul>
            </div>
        </nav>

        <div class="container" resize-line-chart db-on-load-trigger-refresh="refresh-button">
            <div ng-view>



<script type="text/ng-template" id="/call-statistics">
    <div>
        <div class="alert alert-danger js-alert" style="display: none"></div>
        <div class="panel panel-default panel-compact">
            <div class="panel panel-body">
                <div class="row">
                    <div class="col-lg-2">
                        <div>
                            <select id="myselect" ng-model="vm.dateRange">
                                <option value=336>Last Two Weeks</option>
                                <option value=168>Last Week</option>
                                <option value=72>Last 72 Hours</option>
                                <option value=48>Last 48 Hours</option>
                                <option value=24>Last 24 Hours</option>
                                <option value=12>Last 12 Hours</option>
                                <option value=1 selected>Last Hour</option>
                            </select>
                            <button type="button" class="btn btn-primary" data-loading-text="Refreshing..." db-click="vm.refresh()">Refresh</button>
                        </div>
                    </div>
                    <div class="col-lg-3">
                    </div>
                    <div class="col-lg-3">
                    </div>
                    <div class="col-lg-4">
                        <div class="pull-right">
                            <div>
                                Last updated at
                                <span class="time-stamp">{{vm.lastUpdatedDate | date : 'yyyy-MM-dd hh:mm:ss a' }}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <br />
        <div class="row">
            <div class="col-lg-12">
                <div class="js-charts-by-source">
                    <div class="row">
                        <div class="col-lg-2" ng-show="vm.totalCallCounts">
                            <db-line-chart class="pull-left" style="height: 400px; width:100%"
                                           data="vm.totalCallCounts"
                                           title="Total Calls"
                                           axis-range="{{vm.dateRange}}"
                                           chart-area-width="80"
                                           chart-area-height="50"
                                           chart-area-top="15"
                                           chart-area-left="25"></db-line-chart>
                        </div>
                        <div class="col-lg-2" ng-repeat="item in vm.toDisplayinFirstRow" ng-show="vm.callCountsBySource[item]">
                            <db-line-chart class="pull-left" style="height: 400px; width:100%"
                                           data="vm.callCountsBySource[item]"
                                           title="{{item}}"
                                           axis-range="{{vm.dateRange}}"
                                               chart-area-width="80"
                                               chart-area-height="50"
                                               chart-area-top="15"
                                               chart-area-left="25"></db-line-chart>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-2" ng-repeat="item in vm.toDisplayinSecondRow" ng-show="vm.callCountsBySource[item]">
                            <db-line-chart class="pull-left" style="height: 400px; width:100%"
                                           data="vm.callCountsBySource[item]"
                                           title="{{item}}"
                                           axis-range="{{vm.dateRange}}"
                                               chart-area-width="80"
                                               chart-area-height="50"
                                               chart-area-top="15"
                                               chart-area-left="25"></db-line-chart>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-2" ng-repeat="item in vm.toDisplayinThirdRow" ng-show="vm.callCountsBySource[item]">
                            <db-line-chart class="pull-left" style="height: 400px; width:100%"
                                           data="vm.callCountsBySource[item]"
                                           title="{{item}}"
                                            axis-range="{{vm.dateRange}}"
                                            chart-area-width="80"
                                               chart-area-height="50"
                                               chart-area-top="15"
                                               chart-area-left="25"></db-line-chart>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</script>
<script type="text/ng-template" id="stuck-agents">
    <div>
        <div class="alert alert-danger" ng-show="vm.alertMsg">{{vm.alertMsg}}</div>
        <div class="panel panel-default">
            <div class="panel-body">
                <div class="form-inline col-lg-9">
                    <div class="form-group">
                        <label>Start Date</label>
                        <input type="text" class="form-control js-start-date" placeholder="MM/DD/YYYY" ng-model="vm.startDate" />
                    </div>
                    <div class="form-group">
                        <label style="margin-left:30px">Client ID</label>
                        <db-client-combobox default-value="vm.clientId" on-select="vm.onClientSelected(clientId)"></db-client-combobox>
                    </div>
                    <div class="form-group">
                        <label style="margin-left:30px">Agent ID</label>
                        <input type="text" class="form-control js-call-type" ng-model="vm.agentId" />
                    </div>
                    <button class="btn btn-primary js-refresh" data-loading-text="Refreshing..." db-click="vm.refresh()">Refresh</button>
                </div>
                <div class="col-lg-1 col-lg-offset-2">
                    <div class="checkbox">
                        <label>
                            <input type="checkbox" value="local" ng-model="vm.timeMode" ng-true-value="'utc'" ng-false-value="'local'">
                            Show UTC time
                        </label>
                    </div>
                </div>
            </div>
        </div>
        <div class="panel panel-default" ng-show="vm.agents.length > 0">
            <div class="panel-body">
                <div class="alert alert-warning" ng-if="vm.agents.length <= 0">Not found</div>
                <table class="table table-bordered table-hover table-condensed" ng-if="vm.agents.length > 0">
                    <thead>
                        <tr>
                            <th style="text-align: center" ng-repeat="column in vm.columns">{{column}}</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="agent in vm.agents track by $index" ng-click="agent.active = !agent.active" ng-class="{highlight: agent.active}">
                            <td style="text-align: center">
                                <span ng-show="vm.timeMode == 'local'">{{agent.logDate   | date : 'yyyy-MM-dd hh:mm:ss.sss a' }}</span>
                                <span ng-show="vm.timeMode == 'utc'">{{agent.logDate  | date : 'yyyy-MM-dd hh:mm:ss.sss a' : 'UTC' }}</span>
                            </td>
                            <td style="text-align: center">
                                <span ng-show="vm.timeMode == 'local'">{{agent.updateDate   | date : 'yyyy-MM-dd hh:mm:ss.sss a' }}</span>
                                <span ng-show="vm.timeMode == 'utc'">{{agent.updateDate  | date : 'yyyy-MM-dd hh:mm:ss.sss a' : 'UTC' }}</span>
                            </td>
                            <td style="text-align: center">{{agent.clientId}}</td>
                            <td style="text-align: center">{{agent.agentId}}</td>
                            <td style="text-align: center">
                                <a href="#/calls/{{agent.callId}}/logs" target="_blank" ng-if="agent.callId">
                                    {{agent.callId}}
                                </a>
                            </td>
                            <td style="text-align: center">
                                <a href="#/legs/{{agent.legId}}/logs" target="_blank" ng-if="agent.legId">
                                    {{agent.legId}}
                                </a>
                            </td>
                            <td style="text-align: center">
                                {{agent.resetAgentStatusBy}}
                            </td>
                            <td style="text-align: center">
                                <span ng-show="agent.wasCheckedForTwilioNotifications && !agent.isLifeCycleDataAvailable"> Data Not Available</span>
                                <span ng-show="agent.isLifeCycleDataAvailable && agent.twilioErrorCodes.Length == 0">No Twilio Error</span>
                                <div ng-if="agent.twilioErrorCodes && agent.twilioErrorCodes.length > 0">
                                    <span class="text-danger" ng-repeat="errorCode in agent.twilioErrorCodes" style="text-align: center">
                                        <a href="https://www.twilio.com/docs/api/errors/{{errorCode}}" target="_blank" ng-if="errorCode">
                                            {{errorCode}}
                                        </a>
                                    </span>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</script>
<script type="text/ng-template" id="agent-bridge-status">
    <div>
        <div class="alert alert-danger" ng-show="vm.alertMsg">{{vm.alertMsg}}</div>
        <div class="panel panel-default">
            <div class="panel-body">
                <div class="pull-left">
                    <button type="button" class="btn btn-primary refresh-button" data-loading-text="Refreshing..." db-click="vm.refresh()">Refresh</button>
                </div>
                <div class="pull-right">
                    Last updated at
                    <span class="time-stamp">{{vm.lastUpdatedDate | date : 'yyyy-MM-dd hh:mm:ss a' }}</span>
                </div>
            </div>
        </div>
        <div class="alert alert-warning" ng-if="!vm.alertMsg && (vm.agentBridgeStatusResponse.length == 0)">Not found</div>
        <div class="col-lg-12" ng-repeat="response in vm.agentBridgeStatusResponse" ng-show="vm.agentBridgeStatusResponse">
            <div class="row">
                <h4 class="well">{{response.environment}}</h4>
            </div>
            <div class="row">
                <div>
                    <span>Total Active Connections: <b>{{response.connections}}</b></span>
                </div>
                <div class="col-lg-5">
                    <table class="table table-bordered table-hover table-condensed" ng-if="response">
                        <thead>
                            <tr>
                                <th>Machine Name</th>
                                <th>Active Connections</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="machine in response.machines">
                                <td>{{machine.machineName}}</td>
                                <td>{{machine.connections}} </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</script>
<script type="text/ng-template" id="service-status">

    <div class="alert alert-danger" ng-show="vm.alertMsg">{{vm.alertMsg}}</div>
    <div class="panel panel-default panel-compact">
        <div class="panel-body">
            <div class="pull-left">
                <button class="btn btn-primary js-refresh" data-loading-text="Refreshing..." db-click="vm.refresh()">Refresh</button>
            </div>
            <div class="form-inline col-lg-3">
                <div class="checkbox">
                    <label>
                        <input type="radio" name="displayType" value="upTime" ng-model="vm.type" ng-click="vm.changeType()">
                        Up Time
                    </label>
                </div>
                <div class="checkbox">
                    <label>
                        <input type="radio" name="displayType" value="version" ng-model="vm.type" ng-click="vm.changeType()">
                        Version
                    </label>
                </div>
            </div>
            <div class="pull-right">
                Last updated at
                <span class="time-stamp">{{vm.lastUpdatedDate | date : 'yyyy-MM-dd hh:mm:ss a' }}</span>
            </div>
        </div>
    </div>
    <div class="services-container">

        <table class="table table-bordered table-striped table-hover" ng-repeat="(environmentName, enviormentData) in vm.data">
            <caption>
                <h3>{{environmentName}}</h3>
            </caption>
            <thead>
                <tr style="font-size:12px;">
                    <th>Services</th>
                    <th ng-repeat="machineName in enviormentData.machineNames">{{machineName}}</th>
                </tr>
            </thead>
            <tbody>

                <tr ng-repeat="(serviceName, machinesArrayinService) in enviormentData.services">
                    <th style="width: 10% !important">{{serviceName}}</th>
                    <td ng-repeat="itemAtMachineLevel in machinesArrayinService track by $index"
                        ng-class="{success: itemAtMachineLevel.UpTime && itemAtMachineLevel.Status == 'UP',
                         danger:  itemAtMachineLevel && (!itemAtMachineLevel.UpTime || itemAtMachineLevel.Status != 'UP'),muted: !itemAtMachineLevel.UpTime,
                        'clickable-cell': itemAtMachineLevel}"
                        db-new-window-href="{{itemAtMachineLevel.Url}}">
                        <div db-tooltip="itemAtMachineLevel">
                            <span ng-show="vm.type == 'upTime'">{{itemAtMachineLevel.UpTime}}</span>
                            <span ng-show="vm.type == 'version'">{{itemAtMachineLevel.ApplicationVersion}}</span>
                        </div>
                        <span ng-show="itemAtMachineLevel && !itemAtMachineLevel.UpTime">No Response</span>
                    </td>
                </tr>
            </tbody>
        </table>

    </div>
</script>
<script type="text/ng-template" id="response-time">
    <div class="response-time-container">
        <div class="alert alert-danger js-alert" style="display: none"></div>
        <div class="panel panel-default panel-compact">
            <div class="panel-body">
                <div class="row">
                    <div class="col-md-8">
                        <div>
                            <select id="myselect" ng-model="vm.dateRange">
                                <option value=336>Last Two Weeks</option>
                                <option value=168>Last Week</option>
                                <option value=72>Last 72 Hours</option>
                                <option value=48>Last 48 Hours</option>
                                <option value=24>Last 24 Hours</option>
                                <option value=12>Last 12 Hours</option>
                                <option value=1 selected>Last Hour</option>
                            </select>
                            <button type="button" class="btn btn-primary" data-loading-text="Refreshing..." db-click="vm.refresh()">Refresh</button>
                            <span class="checkbox filter">
                                <label>
                                    <input type="checkbox" ng-checked="vm.isShowTotalChecked"  ng-click="vm.showTotal($event)"> Combined Totals Only</input>
                                </label>
                            </span>
                            <span style="font-size:x-small">{{vm.loading}}</span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="pull-right">
                            <div>
                                Last updated:
                                <span class="time-stamp">{{vm.lastUpdatedDate | date : 'yyyy-MM-dd hh:mm:ss a' }}</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-12">
                        <label>Filters:</label>
                        <div class="filter-label">
                            Machines
                        </div>
                        <div class="filter">
                            <div isteven-multi-select
                                 input-model="vm.availableMachines"
                                 output-model="vm.selectedMachines"
                                 button-label="icon name"
                                 item-label="icon name maker"
                                 tick-property="ticked"
                                 helper-elements="all, none"
                                 on-close="vm.refresh()">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-12">
                        <label class="invisible">Filters:</label>
                        <div class="filter-label">
                            Applications
                        </div>
                        <div class="filter">
                            <div isteven-multi-select
                                 input-model="vm.availableApplications"
                                 output-model="vm.selectedApplications"
                                 button-label="icon name"
                                 item-label="icon name maker"
                                 tick-property="ticked"
                                 helper-elements=""
                                 on-close="vm.handleMessageTypesThenRefresh()">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-12">
                        <label class="invisible">Filters:</label>
                        <div class="filter-label">
                            Message Types
                        </div>
                        <div class="filter">
                            <div isteven-multi-select
                                 input-model="vm.availableMessageTypes"
                                 output-model="vm.selectedMessageTypes"
                                 button-label="icon name"
                                 item-label="icon name maker"
                                 tick-property="ticked"
                                 helper-elements="all, none"
                                 on-close="vm.refresh()">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="chart-panel">
            <div>
                <table class="table">
                    <thead>
                        <tr>
                            <th>Message Type</th>
                            <th>Average Response Time / ms</th>
                            <th>Maximum Response Time / ms</th>
                            <th>Total Requests</th>
                        </tr>
                    </thead>
                    <tbody ng-repeat="(key, value) in vm.tabs" id="{{key}}">
                        <tr>
                            <td colspan="4">
                                <label>{{key}}</label>
                                <input hidden class="tab-visibility" ng-model="value.active" />
                            </td>
                        </tr>
                        <tr ng-repeat="(key, value) in value.chartsData">
                            <td>{{value.messageType}}</td>
                            <td>
                                <db-line-chart class="pull-left" style="width: 400px; height: 350px;"
                                               data="value.avgTimingData"
                                               series-colors="value.seriesColors"
                                               title=""
                                               axis-range="{{vm.dateRange}}"
                                               mode="{{vm.mode}}"
                                               type="Average"
                                               chart-area-width="90"
                                               chart-area-height="55"
                                               chart-area-top="10"
                                               chart-area-left="25"></db-line-char>
                            </td>
                            <td>
                                <db-line-chart class="pull-left" style="width: 400px; height: 350px;"
                                               data="value.maxTimingData"
                                               series-colors="value.seriesColors"
                                               title="" axis-range="{{vm.dateRange}}"
                                               mode="{{vm.mode}}"
                                               type="Max"
                                               chart-area-width="90"
                                               chart-area-height="55"
                                               chart-area-top="10"
                                               chart-area-left="25"></db-line-chart>
                            </td>
                            <td>
                                <db-line-chart class="pull-left" style="width: 400px; height: 350px;"
                                               data="value.countData"
                                               series-colors="value.seriesColors"
                                               title=""
                                               axis-range="{{vm.dateRange}}"
                                               mode="{{vm.mode}}"
                                               type="Total"
                                               chart-area-width="90"
                                               chart-area-height="55"
                                               chart-area-top="10"
                                               chart-area-left="25"></db-line-chart>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</script>
<script type="text/ng-template" id="logs">
    <div class="call-logs-container" db-on-load-trigger-refresh="vm.loadPage()">
        <div class="alert alert-danger" ng-show="vm.alertMsg">{{vm.alertMsg}}</div>
        <div class="panel panel-default row" ng-controller="logsToolBar">
    <div class="panel-body">
        <div class="form-inline col-lg-9">
            <div class="checkbox">
                <label>
                    <input type="radio" name="recordType" value="callID" ng-model="vm.type" ng-click="vm.changeType()">
                    Call Id
                </label>
            </div>
            <div class="checkbox">
                <label>
                    <input type="radio" name="recordType" value="legID" ng-model="vm.type" ng-click="vm.changeType()">
                    Leg Id
                </label>
            </div>
            <div class="checkbox">
                <label>
                    <input type="radio" name="recordType" value="twilioCallID" ng-model="vm.type" ng-click="vm.changeType()">
                    Twilio Id
                </label>
            </div>
            <div class="checkbox">
                <label>
                    <input type="radio" name="recordType" value="leadID" ng-model="vm.type" ng-click="vm.changeType()">
                    Lead Id
                </label>
            </div>
            <div class="form-group">
                <div class="col-sm-12">
                    <input type="text" class="form-control" id="callLegId" size="45" placeholder="Enter ID" ng-model="vm.id"/>
                    <span ng-if="vm.validationErrors.id" class="glyphicon glyphicon-asterisk text-danger"></span>
                </div>
            </div>
            <div class="form-group" ng-show="vm.type == 'leadID'" ng-class="{'has-error': vm.validationErrors.clientId}">
                <div class="col-sm-12 ">
                    <label class="form-label" style="font-weight: normal;">Client Id</label>
                    <db-client-combobox default-value="vm.clientId" on-select="vm.onClientSelected(clientId)"></db-client-combobox>
                    <span ng-if="vm.validationErrors.clientId" class="glyphicon glyphicon-asterisk text-danger"></span>
                </div>
            </div>
            <button type="button" role="dbOnLoad" class="btn btn-primary" data-loading-text="Searching..." ng-click="vm.search()">Search</button>
        </div>
        <div class="col-lg-1 col-lg-offset-2">
            <div class="checkbox">
                <label>
                    <input type="checkbox" value="leadID" ng-model="vm.timeMode" ng-true-value="'utc'" ng-false-value="'local'">
                    Show UTC time
                </label>
            </div>
        </div>
    </div>
</div>

        <div class="alert alert-warning" ng-if="vm.noRecords">
            No record found
        </div>
        <div ng-if="vm.callLogResponse && vm.listView">
            <table class="table table-bordered table-hover table-condensed">
                <thead>
                    <tr>
                        <th>Start Time</th>
                        <th>Call Source</th>
                        <th>Call ID</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="call in vm.callLogResponse | orderBy: 'StartTime'">
                        <td>
                            <span ng-show="vm.timeMode == 'local'">{{call.StartTime  | date : 'yyyy-MM-dd hh:mm:ss.sss a' }}</span>
                            <span ng-show="vm.timeMode == 'utc'">{{call.StartTime  | date : 'yyyy-MM-dd hh:mm:ss.sss a' : 'UTC' }}</span>
                        </td>
                        <td>{{call.CallSource}}</td>
                        <td>
                            <a href="#/calls/{{call.Id}}/logs">
                                {{call.Id}}
                            </a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div ng-if="vm.callLogResponse && !vm.listView">
            <div class="row" ng-if="vm.callLogResponse.CallSummary">
    <div class="col-lg-5">
        <div class="page-header">
            <h4>Overview</h4>
        </div>
        <table class="table table-bordered table-hover table-condensed">
            <tr>
                <td>Client ID</td>
                <td>{{vm.callLogResponse.CallSummary.ClientId}}</td>
            </tr>
            <tr>
                <td>First Time</td>
                <td>
                    <span ng-show="vm.timeMode == 'local'">{{vm.callLogResponse.CallSummary.FirstTime |  date : 'yyyy-MM-dd hh:mm:ss.sss a' }}</span>
                    <span ng-show="vm.timeMode == 'utc'">{{vm.callLogResponse.CallSummary.FirstTime | date : 'yyyy-MM-dd hh:mm:ss.sss a' : 'UTC' }}</span>
                </td>
            </tr>
            <tr>
                <td>Last Time</td>
                <td>
                    <span ng-show="vm.timeMode == 'local'">{{vm.callLogResponse.CallSummary.LastTime | date : 'yyyy-MM-dd hh:mm:ss.sss a' }}</span>
                    <span ng-show="vm.timeMode == 'utc'">{{vm.callLogResponse.CallSummary.LastTime | date : 'yyyy-MM-dd hh:mm:ss.sss a' : 'UTC' }}</span>
                </td>
            </tr>
            <tr>
                <td>Twilio Account SID</td>
                <td>{{vm.callLogResponse.CallSummary.TwilioAccountSid}}</td>
            </tr>
        </table>
    </div>
</div>
            <div ng-if="vm.callFlow && vm.callFlow.CallTransitionedTo" class="row">
    <div class="page-header">
        <h4>Call Flow</h4>
    </div>
    <div id="callFlowSVG" db-callflow-graph call-flow="vm.callFlow" call-alias-mapping="vm.getAlias(guid)" hidden></div>
    <div id="svgArea"></div>
    <div>
        <span ng-repeat="(key, value) in vm.aliasMapping" ng-if="value.alias.indexOf('Leg') <= 0 && value.alias != 'null' && value.alias[0] == 'C'">
            <label>{{value.alias}}</label>: {{key}}
        </span>
    </div>
</div>
<div class="alert alert-danger row" ng-show="vm.callFlow.error">Unable to load call flow: {{vm.callFlow.Error}}</div>
            <div ng-if="vm.callLogResponse.CallLog" class="row">
    <div class="page-header">
        <h4>Call ({{vm.callLogResponse.CallLog.Id}})</h4>
    </div>
    <div class="col-lg-6">
        <div class="row">
            <table class="table table-bordered table-hover table-condensed">
                <tbody>
                <tr ng-if="vm.callLogResponse.CallLog.CallOrigin && vm.callLogResponse.CallLog.CallOrigin != 'Unknown'">
                    <td>Origin</td>
                    <td>{{vm.callLogResponse.CallLog.CallOrigin}}</td>
                </tr>
                <tr ng-if="vm.callLogResponse.CallLog.CallSource && vm.callLogResponse.CallLog.CallSource != 'Unknown'">
                    <td>Source</td>
                    <td>{{vm.callLogResponse.CallLog.CallSource}}</td>
                </tr>
                <tr ng-if="vm.callLogResponse.CallLog.InitialCallType && vm.callLogResponse.CallLog.InitialCallType !== 'Unknown'">
                    <td>Initial Type</td>
                    <td>{{vm.callLogResponse.CallLog.InitialCallType}}</td>
                </tr>
                <tr ng-if="vm.callLogResponse.CallLog.AppVersion  && vm.callLogResponse.CallLog.AppVersion  !== 'Unknown'">
                    <td>App Version</td>
                    <td>{{vm.callLogResponse.CallLog.AppVersion}}</td>
                </tr>
                <tr ng-if="vm.callLogResponse.CallLog.OwnerAgentId">
                    <td>Owner Agent ID</td>
                    <td>{{vm.callLogResponse.CallLog.OwnerAgentId}}</td>
                </tr>
                <tr ng-if="vm.callLogResponse.CallLog.ContactId">
                    <td>Contact ID</td>
                    <td>{{vm.callLogResponse.CallLog.ContactId}}</td>
                </tr>
                <tr ng-if="vm.callLogResponse.CallLog.CampaignId && vm.callLogResponse.CallLog.CampaignId !== 'Unknown'">
                    <td>Campaign ID </td>
                    <td>{{vm.callLogResponse.CallLog.CampaignId}}</td>
                </tr>
                <tr ng-if="vm.callLogResponse.CallLog.CallScore && vm.callLogResponse.CallLog.CallScore !== 'Unknown'">
                    <td>Call Score</td>
                    <td>{{vm.callLogResponse.CallLog.CallScore}}</td>
                </tr>
                <tr ng-if="vm.callLogResponse.CallLog.StartTime">
                    <td>Start Time</td>
                    <td>
                        <span ng-show="vm.timeMode == 'local'">{{vm.callLogResponse.CallLog.StartTime | date : 'yyyy-MM-dd hh:mm:ss.sss a' }}</span>
                        <span ng-show="vm.timeMode == 'utc'">{{vm.callLogResponse.CallLog.StartTime | date : 'yyyy-MM-dd hh:mm:ss.sss a' : 'UTC' }}</span>
                    </td>
                </tr>
                <tr ng-if="vm.callLogResponse.CallLog.EndTime">
                    <td>End Time</td>
                    <td>
                        <span ng-show="vm.timeMode == 'local'">{{vm.callLogResponse.CallLog.EndTime | date : 'yyyy-MM-dd hh:mm:ss.sss a' }}</span>
                        <span ng-show="vm.timeMode == 'utc'">{{vm.callLogResponse.CallLog.EndTime | date : 'yyyy-MM-dd hh:mm:ss.sss a' : 'UTC' }}</span>
                    </td>
                </tr>
                <tr ng-if="vm.callLogResponse.CallLog.CallOutcome  && vm.callLogResponse.CallLog.CallOutcome !== 'Unknown'">
                    <td>Outcome</td>
                    <td>{{vm.callLogResponse.CallLog.CallOutcome}}</td>
                </tr>
                <tr ng-if="vm.callLogResponse.CallLog.Duration">
                    <td>Duration (Sec)</td>
                    <td>{{vm.callLogResponse.CallLog.Duration}}</td>
                </tr>
                <tr ng-if="vm.callLogResponse.CallLog.CallDisconnectReason && vm.callLogResponse.CallLog.CallDisconnectReason != 'Unknown'">
                    <td>Disconnect Reason</td>
                    <td>{{vm.callLogResponse.CallLog.CallDisconnectReason}}</td>
                </tr>
                <tr ng-if="vm.callLogResponse.CallLog.InboundNumber">
                    <td>Inbound Number</td>
                    <td>{{vm.callLogResponse.CallLog.InboundNumber}}</td>
                </tr>
                <tr ng-if="vm.callLogResponse.CallLog.QueuingTimeInSeconds">
                    <td>Queuing Time / s</td>
                    <td>{{vm.callLogResponse.CallLog.QueuingTimeInSeconds}}</td>
                </tr>
                <tr ng-if="vm.callLogResponse.CallLog.CallQueueMenuPlayedCount">
                    <td>Call Queue Menu Played Count</td>
                    <td>{{vm.callLogResponse.CallLog.CallQueueMenuPlayedCount}}</td>
                </tr>
                <tr ng-if="vm.callLogResponse.CallLog.InboundRecipientAgentId">
                    <td>Inbound Recipient Agent ID</td>
                    <td>{{vm.callLogResponse.CallLog.InboundRecipientAgentId}}</td>
                </tr>
                <tr ng-if="vm.callLogResponse.CallLog.InboundCallOutcome">
                    <td>Inbound Outcome</td>
                    <td>{{vm.callLogResponse.CallLog.InboundCallOutcome}}</td>
                </tr>
                <tr ng-if="vm.callLogResponse.CallLog.WasCancelled != null">
                    <td>Inbound Exited Call Queue</td>
                    <td>
                        <span class="label label-success" ng-show="vm.callLogResponse.CallLog.WasCancelled">
                            <span class="glyphicon glyphicon-ok"></span>
                        </span>
                    </td>
                </tr>
                <tr ng-if="vm.callLogResponse.CallLog.IsRoutedToOwner != null">
                    <td>Routed to Owner</td>
                    <td>
                        <span class="label label-success" ng-show="vm.callLogResponse.CallLog.IsRoutedToOwner">
                            <span class="glyphicon glyphicon-ok"></span>
                        </span>
                    </td>
                </tr>
                <tr ng-if="vm.callLogResponse.CallLog.TransferType">
                    <td>Transfer Type</td>
                    <td>{{vm.callLogResponse.CallLog.TransferType}}</td>
                </tr>
                <tr ng-if="vm.callLogResponse.CallLog.TransferAttemptCount">
                    <td>Transfer Attempt Count</td>
                    <td>{{vm.callLogResponse.CallLog.TransferAttemptCount}}</td>
                </tr>
                <tr ng-if="vm.callLogResponse.CallLog.ContactHoldTimeInMilliSeconds">
                    <td>ContactHoldTime / ms</td>
                    <td>{{vm.callLogResponse.CallLog.ContactHoldTimeInMilliSeconds}}</td>
                </tr>
                <tr ng-if="vm.callLogResponse.CallLog.TransferWasSuccessful">
                    <td>Transfer Successful</td>
                    <td>
                        <span class="label label-success" ng-show="vm.callLogResponse.CallLog.TransferWasSuccessful">
                            <span class="glyphicon glyphicon-ok"></span>
                        </span>
                    </td>
                </tr>
                <tr ng-if="vm.callLogResponse.CallLog.TransferredToAgentId">
                    <td>Transfer Recipient Agent ID</td>
                    <td>{{vm.callLogResponse.CallLog.TransferredToAgentId}}</td>
                </tr>
                <tr ng-if="vm.callLogResponse.CallLog.DistributionProgramId">
                    <td>Distribution Program ID</td>
                    <td>{{vm.callLogResponse.CallLog.DistributionProgramId}}</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="col-lg-6">
        <table class="table table-bordered table-condensed table-hover">
            <tbody>
                <tr ng-repeat="leg in vm.callLogResponse.CallLog.Legs"  ng-click="vm.goToAnchor(vm.getAlias(leg.LegId), $event)">
                    <td>{{leg.LegType}} Leg</td>
                    <td>
                        <div>
                            <label>ID: </label>
                            <span><a href="#/legs/{{leg.LegId}}/logs">{{leg.LegId}}</a></span>
                        </div>
                        <div>
                            <label>Start Time: </label>
                            <span ng-show="vm.timeMode == 'utc'">{{leg.StartTime | date : 'yyyy-MM-dd hh:mm:ss.sss a' : 'UTC' }}</span>
                            <span ng-show="vm.timeMode == 'local'">{{leg.StartTime | date : 'yyyy-MM-dd hh:mm:ss.sss a' }}</span>
                        </div>
                        <div ng-if="leg.EndTime">
                            <label>End Time: </label>
                            <span ng-show="vm.timeMode == 'utc'">{{leg.EndTime | date : 'yyyy-MM-dd hh:mm:ss.sss a' : 'UTC' }}</span>
                            <span ng-show="vm.timeMode == 'local'">{{leg.EndTime | date : 'yyyy-MM-dd hh:mm:ss.sss a' }}</span>
                        </div>
                        <div ng-if="leg.TimeWithCall">
                            <label>Time with call (Sec): </label>
                            <span>{{leg.TimeWithCall}}</span>
                        </div>
                        <div ng-if="vm.getTwilioErrorCode(leg.LegId)" class="text-danger">
                            <label>Twilio Error Codes: </label>
                            <span>{{vm.getTwilioErrorCode(leg.LegId)}}</span>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
            <div class="row">
    <table class="table table-bordered table-hover table-condensed">
        <thead>
        <tr>
            <th>Log Date</th>
            <th>From State</th>
            <th>To State</th>
            <th>Trigger</th>
            <th>Call Type</th>
            <th>Correlation ID</th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="log in vm.callLogResponse.CallLifeCycleLogs">
            <td>
                <div ng-show="vm.timeMode == 'local'">{{log.LogDate | date : 'yyyy-MM-dd hh:mm:ss.sss a' }}</div>
                <div ng-show="vm.timeMode == 'utc'">{{log.LogDate | date : 'yyyy-MM-dd hh:mm:ss.sss a' : 'UTC' }}</div>
            </td>
            <td>{{log.FromStateName}}</td>
            <td>{{log.ToStateName}}</td>
            <td>{{log.Trigger}}</td>
            <td>{{log.CallType}}</td>
            <td>{{log.CorrelationId}}</td>
        </tr>
        </tbody>
    </table>
</div>

            <div ng-repeat="legLog in vm.callLogResponse.LegLogs">
    <div class="row">
        <div class="page-header" id="anchor{{vm.getAlias(legLog.LegId)}}">
            <h4>{{legLog.LegType}} Leg</h4>
        </div>
        <div>
            <div class="col-lg-5">
                <table class="table table-bordered table-hover table-condensed">
                    <tr>
                        <td>Leg ID</td>
                        <td>
                            <a href="#/legs/{{legLog.LegId}}/logs">{{legLog.LegId}}</a>
                        </td>
                    </tr>
                    <tr ng-if="legLog.AgentId">
                        <td>Agent ID</td>
                        <td>
                            {{legLog.AgentId}}
                        </td>
                    </tr>
                    <tr ng-if="legLog.ContactId">
                        <td>Contact ID</td>
                        <td>
                            {{legLog.ContactId}}
                        </td>
                    </tr>
                    <tr>
                        <td>Start Time</td>
                        <td>
                            <div ng-show="vm.timeMode == 'local'">{{legLog.StartTime | date : 'yyyy-MM-dd hh:mm:ss.sss a' }}</div>
                            <div ng-show="vm.timeMode == 'utc'">{{legLog.StartTime | date : 'yyyy-MM-dd hh:mm:ss.sss a' : 'UTC' }}</div>
                        </td>
                    </tr>
                    <tr ng-if="legLog.ProviderLegId">
                        <td>Twilio Call SID</td>
                        <td>
                            <a href="#/twilio/{{legLog.ProviderLegId}}/logs">{{legLog.ProviderLegId}}</a>
                        </td>
                    </tr>
                    <tr ng-if="legLog.ProviderLegId && legLog.LegType=='Contact'">
                        <td>VoiceBase Analysis</td>
                        <td>
                            <a href="#/voiceBasePlayer/byProviderLeg/{{legLog.ProviderLegId}}">{{legLog.ProviderLegId}}</a>
                        </td>
                    </tr>

                    <tr ng-if="legLog.PhoneNumberType && legLog.PhoneNumberType != 'Unknown'">
                        <td>Phone Type</td>
                        <td>
                            {{legLog.PhoneNumberType}}
                        </td>
                    </tr>
                    <tr ng-if="legLog.PhoneNumber">
                        <td>Phone Number</td>
                        <td>
                            {{legLog.PhoneNumber}}
                            <span ng-if="legLog.PhoneExtension">
                                X {{legLog.PhoneExtension}}
                            </span>
                        </td>
                    </tr>
                    <tr ng-if="legLog.UsedPersistence">
                        <td>Used Persistence</td>
                        <td>
                            {{legLog.UsedPersistence}}
                        </td>
                    </tr>
                    <tr ng-if="legLog.CallerId">
                        <td>Caller ID</td>
                        <td>
                            {{legLog.CallerId}}
                        </td>
                    </tr>
                    <tr ng-if="legLog.CallerIdSource && legLog.CallerIdSource != 'None'">
                        <td>Caller ID Source</td>
                        <td>
                            {{legLog.CallerIdSource}}
                        </td>
                    </tr>
                    <tr>
                        <td>End Time</td>
                        <td>
                            <div ng-show="vm.timeMode == 'local'">{{legLog.EndTime | date : 'yyyy-MM-dd hh:mm:ss.sss a' }}</div>
                            <div ng-show="vm.timeMode == 'utc'">{{legLog.EndTime | date : 'yyyy-MM-dd hh:mm:ss.sss a' : 'UTC' }}</div>
                        </td>
                    </tr>
                    <tr ng-if="legLog.ProviderDurationSeconds">
                        <td>Twilio Duration (Sec)</td>
                        <td>
                            {{legLog.ProviderDurationSeconds}}
                        </td>
                    </tr>
                    <tr ng-if="legLog.RecordingUrl">
                        <td>Recording</td>
                        <td>
                            <audio preload="metadata" controls>
                                <source ng-src="{{legLog.RecordingUrl + '.wav'}}" type="audio/wav">
                                <source ng-src="{{legLog.RecordingUrl + '.mp3'}}" type="audio/mpeg">
                            </audio>
                        </td>
                    </tr>
                    <tr ng-if="legLog.CountryCode">
                        <td>Country Code</td>
                        <td>
                            {{legLog.CountryCode}}
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</div>
            <div class="service-log-container row">
    <div class="page-header">
        <h4>Service Log</h4>
    </div>
    <table class="table table-bordered table-hover table-condensed" style="width:100%; overflow: auto">
        <thead>
            <tr>
                <th>Log Date</th>
                <th style="width: 6%">
                    <div class="col-lg-6">
                        ID
                    </div>
                    <div class="col-lg-6">
                        <div class="dropdown">
                            <button class="btn btn-xs dropdown-toggle" id="keyId-dropdown-servicelog" data-toggle="dropdown" aria-expanded="true">
                                <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu checkbox-filter-menu" role="menu" aria-labelledby="keyId-dropdown-servicelog">
                                <li role="presentation" ng-repeat="(key, value) in vm.aliasMapping">
                                    <div class="checkbox">
                                        <label>
                                            <input type="checkbox" ng-click="vm.updateServiceLogKeyIds($event, key)" checked="checked"> {{value.alias}}
                                        </label>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </th>
                <th>Message Type</th>
                <th>Execution Time</th>
                <th>Call Status</th>
                <th>Request Data</th>
                <th>Raw Data</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="log in vm.callLogResponse.ServiceLogs" ng-show="vm.showServiceLog(log.KeyId)">
                <td ng-show="vm.timeMode == 'local'">{{log.LogDate  | date : 'yyyy-MM-dd hh:mm:ss.sss a' }}</td>
                <td ng-show="vm.timeMode == 'utc'">{{log.LogDate  | date : 'yyyy-MM-dd hh:mm:ss.sss a' : 'UTC' }}</td>
                <td>
                    <a ng-click="vm.goToAnchor(vm.getAlias(log.KeyId), $event)">
                        {{vm.getAlias(log.KeyId)}}
                    </a>
                </td>
                <td>{{log.MessageType}}</td>
                <td>{{log.ExecutionTime}}</td>
                <td>{{vm.getTwilioCallStatus(log.RequestData, log.ResponseData)}}</td>
                <td>
                    <div ng-if="log.Uri != 'null' || log.RequestData != 'null' || log.ResponseData != 'null'">
                        <div>Uri:</div>
                        <div><pre>{{log.Uri}}</pre></div>
                        <div>
                            <accordion close-others="false">
                                <accordion-group heading="Request Data" is-open="false">
                                    <pre>{{vm.prettyTwilioData(log.RequestData)}}</pre>
                                </accordion-group>
                                <accordion-group heading="Response Data" is-open="false">
                                    <pre>{{vm.prettyTwilioData(log.ResponseData)}}</pre>
                                </accordion-group>
                            </accordion>
                        </div>
                    </div>
                </td>
                <td><a db-new-window-href="#/jsonViewer" query-param-data="log.rawData" window-size="width=800, height=900" hide-menu="true">View</a></td>
            </tr>
        </tbody>
    </table>
    <div class="alert alert-warning" ng-show="vm.serviceLogKeyIds.length == 0">
        Please select at least one Id
    </div>
</div>
        </div>
    </div>
</script>

<script type="text/ng-template" id="client-configuration">
    <div>
        <div class="panel panel-default">
            <div class="panel-body">
                <div class="form-inline">
                    <div class="form-group">
                        <label>Client</label>
                        <db-client-combobox default-value="vm.clientId" on-select="vm.onClientSelected(clientId)"></db-client-combobox>
                    </div>
                    <button class="btn btn-primary js-refresh" data-loading-text="Searching..." ng-click="vm.refresh()">Search</button>
                </div>
            </div>
        </div>
    </div>
    <div class="alert alert-danger" ng-show="vm.alertMsg">{{vm.alertMsg}}</div>
    <div>
        <h4>{{vm.clientId}}</h4>
        <table class="table table-bordered table-hover table-condensed">
           <tbody>
                <tr ng-repeat="configuration in vm.configurations">
                    <td>{{configuration.label}}</td>
                    <td>{{configuration.value}}</td>
                </tr>
            </tbody>
        </table>
    </div>
    <div ng-if="vm.inboundNumbersInCommon.length > 0">
        <h4>Inbound Numbers in Lead Manager and Twilio</h4>
        <div watch="vm.inboundNumbersInCommon">
            <table class="table table-bordered table-hover table-condensed">
                <thead>
                    <tr>
                        <th col="PhoneNumber">Phone Number</th>
                        <th col="FriendlyName">Friendly Name</th>
                        <th col="CampaignId">Campaign ID</th>
                        <th col="VoiceUrl">Twilio Voice URL</th>
                        <th col="VoiceFallBackUrl">Twilio Voice Fallback URL</th>
                        <th col="StatusCallBackUrl">Twilio Status Callback URL</th>
                        <th col="IsLocalCallerId">Local Caller ID</th>
                        <th col="IsTollFree">Toll Free</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="number in vm.inboundNumbersInCommon">
                        <td style="width:120px">{{vm.formatPhoneNumber(number.PhoneNumber)}}</td>
                        <td style="width:120px">{{number.FriendlyName}}</td>
                        <td style="width:100px">{{number.CampaignId}}</td>
                        <td style="width:250px">{{number.VoiceUrl}}</td>
                        <td>{{number.VoiceFallBackUrl}}</td>
                        <td>{{number.StatusCallBackUrl}}</td>
                        <td style="width:120px">
                            <span class="label label-success" ng-show="number.IsLocalCallerId">
                                <span class="glyphicon glyphicon-ok"></span>
                            </span>
                        </td>
                        <td style="width:120px">
                            <span class="label label-success" ng-show="number.IsTollFree">
                                <span class="glyphicon glyphicon-ok"></span>
                            </span>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div ng-if="vm.inboundNumbersInLm.length > 0">
        <h4>Inbound Numbers in Lead Manager</h4>
        <div class="row">
            <div class="col-lg-6">
                <table class="table table-bordered table-hover table-condensed" at-table at-list="vm.inboundNumbersInLm">
                    <thead></thead>
                    <tbody>
                        <tr>
                            <td at-sortable at-initial-sorting="asc" at-attribute="PhoneNumber" at-title="Phone Number" style="width:150px">{{vm.formatPhoneNumber(item.PhoneNumber)}}</td>
                            <td at-implicit at-attribute="CampaignId" at-title="Campaign ID" style="width:100px"></td>
                            <td at-attribute="IsLocalCallerId" at-title="Local Caller ID">
                                <span class="label label-success" ng-show="item.IsLocalCallerId">
                                    <span class="glyphicon glyphicon-ok"></span>
                                </span>
                            </td>
                            <td at-attribute="IsTollFree" at-title="Toll Free">
                                <span class="label label-success" ng-show="item.IsTollFree">
                                    <span class="glyphicon glyphicon-ok"></span>
                                </span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div ng-if="vm.inboundNumbersInTwilio.length > 0">
        <h4>Inbound Numbers in Twilio</h4>
        <table class="table table-bordered table-hover table-condensed" at-table at-list="vm.inboundNumbersInTwilio">
            <thead></thead>
            <tbody>
                <tr>
                    <td at-sortable at-initial-sorting="asc" at-attribute="PhoneNumber" at-title="Phone Number" style="width:150px">{{vm.formatPhoneNumber(item.PhoneNumber)}}</td>
                    <td at-sortable at-implicit at-attribute="FriendlyName" at-title="Friendly Name" style="width:150px"></td>
                    <td at-implicit at-attribute="VoiceUrl" at-title="Twilio Voice URL" style="width:600px"></td>
                    <td at-implicit at-attribute="VoiceFallBackUrl" at-title="Twilio Voice Fallback URL"></td>
                    <td at-implicit at-attribute="StatusCallBackUrl" at-title="Twilio Status Callback URL"></td>
                </tr>
            </tbody>
        </table>
    </div>
</script>
<script type="text/ng-template" id="json-viewer">
    <div class="panel panel-default">
        <div class="panel-body">
            <pre ng-bind-html="vm.content"></pre>
        </div>
    </div>
</script>

<script type="text/ng-template" id="distribution">
    <div class="panel panel-default">
        <div class="panel-body">
            <div class="form-inline">
                <div class="form-group">
                    <label>Client ID:</label>
                    <db-client-combobox default-value="vm.clientId" on-select="vm.onClientSelected(clientId)"></db-client-combobox>
                </div> &nbsp;
                <div class="form-group">
                    <label>Contact ID:</label>
                    <input type="text" class="form-control js-call-type" ng-model="vm.contactId" />
                </div>
                <div class="form-group">
                    <button class="btn btn-primary js-refresh" data-loading-text="Searching..." ng-click="vm.refresh()">Search</button>
                </div>
            </div>
        </div>
    </div>


    <div class="panel-body">
        <div class="alert alert-danger" ng-show="vm.alertMsg">{{vm.alertMsg}}</div>
        <div ng-if="vm.distributionData.Data">
            <table class="table-bordered table-hover table-condensed">
                <thead>
                    <tr>
                        <th>
                            Local Time
                        </th>
                        <th>
                            UTC Time
                        </th>
                        <th>
                            <div style="margin-right:20px">
                                Distribution Type
                            </div>
                        </th>
                        <th>
                            <div style="margin-right:20px">
                                Agent ID
                            </div>
                        </th>
                        <th>
                            Query/Call ID
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="attempt in vm.distributionData.Data">
                        <td><div style="margin-right:20px">{{attempt.CreateDate  | date : 'yyyy-MM-dd hh:mm:ss.sss a' }}</div></td>
                        <td><div style="margin-right:20px">{{attempt.CreateDate   | date : 'yyyy-MM-dd hh:mm:ss.sss a' : 'UTC' }}</div></td>
                        <td>
                            <div style="margin-right:20px">
                                <a href="#/distribution/clientId/{{vm.clientId}}/contactId/{{vm.contactId}}/queryId/{{attempt.QueryId}}">
                                    {{vm.getDistributionType(attempt.ConsumerType)}}
                                </a>
                            </div>
                        </td>
                        <td> <div style="margin-right:20px">{{attempt.AgentId}}</div></td>
                        <td>
                            <div style="margin-right:20px">
                                <a href="#/calls/{{attempt.QueryId}}/logs" ng-if="!vm.isShotgunPush(attempt.QueryId)">
                                    {{attempt.QueryId}}
                                </a>
                                <span ng-if="vm.isShotgunPush(attempt.QueryId)">
                                    {{attempt.QueryId}}
                                </span>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</script>
<script type="text/ng-template" id="agent-distribution">
    <div class="panel panel-default">
        <div class="panel-body">
            <div class="form-inline">
                <div class="form-group">
                    <label>Client ID:</label>
                    <db-client-combobox default-value="vm.clientId" on-select="vm.onClientSelected(clientId)"></db-client-combobox>
                </div> &nbsp;
                <div class="form-group">
                    <label>Agent ID:</label>
                    <input type="text" class="form-control js-call-type" ng-model="vm.agentId" />
                </div>
                <div class="form-group">
                    <label>Start Date:</label>
                    <input type="text" class="form-control js-call-type" ng-model="vm.startDate" />
                </div>
                <div class="form-group">
                    <label>End Date:</label>
                    <input type="text" class="form-control js-call-type" ng-model="vm.endDate" />
                </div>
                <div class="form-group">
                    <button class="btn btn-primary js-refresh" data-loading-text="Searching..." ng-click="vm.refresh()">Search</button>
                </div>
                <div class="form-group">
                    <table>
                        <tr>
                            <td>
                                <div class="checkbox">
                                    <label>
                                        <input type="checkbox" value="local" ng-model="vm.timeMode" ng-true-value="'utc'" ng-false-value="'local'">
                                        Show UTC time
                                    </label>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="checkbox">
                                    <label>
                                        <input type="checkbox" value="local" ng-model="vm.orderBy" ng-true-value="'DESC'" ng-false-value="'ASC'">
                                        Show most recent distribution first
                                    </label>
                                </div>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>


    <div class="panel-body">
        <div class="alert alert-danger" ng-show="vm.alertMsg">{{vm.alertMsg}}</div>

          <div>
            <table class="table-bordered table-hover table-condensed"  ng-if="vm.distributionData && vm.distributionData.length != 0">
                <thead>
                    <tr>
                        <th>
                            <span ng-show="vm.timeMode == 'local'">Local Time</span>
                            <span ng-show="vm.timeMode == 'utc'">UTC Time</span>
                        </th>
                        <th>
                            <div style="margin-right:20px">
                                Step
                            </div>
                        </th>
                        <th>
                            <div style="margin-right:20px">
                                Data
                            </div>
                        </th>
                        <th>
                            <div style="margin-right:20px">
                                Query Type
                            </div>
                        </th>
                        <th>
                            <div style="margin-right:20px">
                                Query ID
                            </div>
                        </th>
                        <th>
                            <div style="margin-right:20px">
                                Contact ID
                            </div>
                        </th>
                        <th>
                            <div style="margin-right:20px">
                                Notification
                            </div>
                        </th>
                        <th>
                            <div style="margin-right:20px">
                                Program ID
                            </div>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="attempt in vm.getDistributionDate()">
                        <td>
                            <span ng-show="vm.timeMode == 'local'">{{attempt.CreateDate  | date : 'yyyy-MM-dd hh:mm:ss.sss a' }}</span>
                            <span ng-show="vm.timeMode == 'utc'">{{attempt.CreateDate  | date : 'yyyy-MM-dd hh:mm:ss.sss a' : 'UTC' }}</span>
                        </td>
                        <td>
                              <div style="margin-right:20px">{{attempt.Step}}</div>
                        </td>
                        <td>
                            <div ng-if="vm.isGuid(attempt.StepData) === true" style="margin-right:20px">
                                <a href="#/calls/{{attempt.StepData}}/logs">
                                    {{attempt.StepData}}
                                </a>
                            </div>
                            <div ng-if="vm.isGuid(attempt.StepData) === false">
                                {{vm.getFormattedStepData(attempt.StepData)}}
                            </div>
                        </td>
                        <td>
                            <div style="margin-right:20px">{{vm.getDistributionType(attempt.ConsumerType)}}</div>
                        </td>
                        <td>
                            <div style="margin-right:20px">
                                <a href="#/distribution/clientId/{{vm.clientId}}/contactId/{{attempt.ContactId}}/queryId/{{attempt.QueryId}}">
                                    {{attempt.QueryId}}
                                </a>
                            </div>
                        </td>
                        <td>
                             <div style="margin-right:20px">{{attempt.ContactId}}</div>
                        </td>
                        <td>
                            <div style="margin-right:20px">{{attempt.NotificationType}}</div>
                        </td>
                        <td>
                            <div style="margin-right:20px">{{attempt.ProgramId}}</div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</script>
<script type="text/ng-template" id="dialiq-status">
    <div class="status-container">
        <div class="alert alert-danger js-alert" style="display: none"></div>
        <div class="panel panel-default">
            <div class="panel panel-body">
                <div class="row">
                    <div class="col-lg-2">
                        <div>
                            <select id="myselect" ng-model="vm.dateRange">
                                <option value=336>Last Two Weeks</option>
                                <option value=168>Last Week</option>
                                <option value=72>Last 72 Hours</option>
                                <option value=48>Last 48 Hours</option>
                                <option value=24>Last 24 Hours</option>
                                <option value=12>Last 12 Hours</option>
                                <option value=1 selected>Last Hour</option>
                            </select>
                            <button type="button" class="btn btn-primary" data-loading-text="Refreshing..." db-click="vm.refresh()">Refresh</button>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="pull-left" style="margin:8px">
                            Call Types:
                        </div>
                        <div class="btn-group" role="group">
                            <button type="button"  class="btn btn-default" ng-class="{active: vm.OutboundClass == 'active'}" ng-click=vm.setOutbound()>Outbound Prod</button>
                            <button type="button" class="btn btn-default" ng-class="{active: vm.OutboundSecondaryClass == 'active'}" ng-click="vm.setSecondaryOutbound()">Outbound PreProd</button>
                        </div>
                    </div>

                    <div class="pull-right">
                        <div>
                            Last updated at
                            <span class="time-stamp">{{vm.lastUpdatedDate | date : 'yyyy-MM-dd hh:mm:ss a' }}</span>
                        </div>
                    </div>

                </div>
            </div>
        </div>
        <div class="top-margin">
            <div class="row">
                <div class="col-lg-12">
                    <div  class="form-group col-lg-2 pull-left">
                        <button type="button" class="btn btn-primary" ng-class="{disabled : !vm.checkStatusBtn.active}" id="checkStatus" ng-click="vm.checkStatus()">{{vm.checkStatusBtn.text}}</button>
                    </div>
                    <div class="col-lg-2 pull-left" style="margin-bottom:10px">
                        <div style="display:block; width:150px;" class="label" ng-show="vm.manualStatusCheckResult"
                             ng-class="{'label-success': vm.manualStatusCheckResult == 'UP', 'label-danger': vm.manualStatusCheckResult == 'DOWN'}">{{vm.manualStatusCheckResult}}</div>
                    </div>
                    <div class="col-lg-8">
                    </div>
                </div>
            </div>

            <div class="pull-left col-lg-12" ng-if="vm.historyData.length > 0" >
                <db-line-chart style="width:100%"
                               data="vm.historyData"
                               axis-range={{vm.dateRange}}
                               show-text-every="2"
                               h-axis-grid-lines="12"
                               vertical-grid-lines="2"
                               slanted-text="false"
                               format="1"
                               title="{{vm.ServiceName}}"
                               chart-area-width="99"
                               chart-area-left="1"></db-line-chart>
            </div>

            <div class="pull-left" ng-show="vm.historyData.length <= 0">
                <span class="alert alert-danger js-alert">Data not available for given interval</span>
            </div>


            <div ng-show="vm.LogData.length > 0">
                <div style=" font-size:20px;  margin-top:20px">
                    Last Errors:
                </div>
                <div>
                    <table class="table table-bordered table-striped table-hover ">
                        <thead>
                            <tr style="font-size:12px;">
                                <th ng-repeat="name in vm.columnNames">{{name}}</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="item in vm.LogData">
                                <td style="width:120px">
                                    {{item.LogDate | date : 'yyyy-MM-dd hh:mm:ss a'}}
                                </td>
                                <td>
                                    {{item.Status}}
                                </td>
                                <td style="width:100px">
                                    {{item.SessionId}}
                                </td>
                                <td style="width:100px;">
                                    <a href="#/calls/{{item.CallId}}/logs">{{item.CallId}}</a>
                                </td>
                                <td>
                                    {{item.Error}}
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        </div>
</script>
<script type="text/ng-template" id="correlationId-summary">
    <div class="call-logs-container">
        <div class="alert alert-danger" ng-show="vm.alertMsg">{{vm.alertMsg}}</div>
        <div class="panel panel-default row" ng-controller="logsToolBar">
    <div class="panel-body">
        <div class="form-inline col-lg-9">
            <div class="checkbox">
                <label>
                    <input type="radio" name="recordType" value="callID" ng-model="vm.type" ng-click="vm.changeType()">
                    Call Id
                </label>
            </div>
            <div class="checkbox">
                <label>
                    <input type="radio" name="recordType" value="legID" ng-model="vm.type" ng-click="vm.changeType()">
                    Leg Id
                </label>
            </div>
            <div class="checkbox">
                <label>
                    <input type="radio" name="recordType" value="twilioCallID" ng-model="vm.type" ng-click="vm.changeType()">
                    Twilio Id
                </label>
            </div>
            <div class="checkbox">
                <label>
                    <input type="radio" name="recordType" value="leadID" ng-model="vm.type" ng-click="vm.changeType()">
                    Lead Id
                </label>
            </div>
            <div class="form-group">
                <div class="col-sm-12">
                    <input type="text" class="form-control" id="callLegId" size="45" placeholder="Enter ID" ng-model="vm.id"/>
                    <span ng-if="vm.validationErrors.id" class="glyphicon glyphicon-asterisk text-danger"></span>
                </div>
            </div>
            <div class="form-group" ng-show="vm.type == 'leadID'" ng-class="{'has-error': vm.validationErrors.clientId}">
                <div class="col-sm-12 ">
                    <label class="form-label" style="font-weight: normal;">Client Id</label>
                    <db-client-combobox default-value="vm.clientId" on-select="vm.onClientSelected(clientId)"></db-client-combobox>
                    <span ng-if="vm.validationErrors.clientId" class="glyphicon glyphicon-asterisk text-danger"></span>
                </div>
            </div>
            <button type="button" role="dbOnLoad" class="btn btn-primary" data-loading-text="Searching..." ng-click="vm.search()">Search</button>
        </div>
        <div class="col-lg-1 col-lg-offset-2">
            <div class="checkbox">
                <label>
                    <input type="checkbox" value="leadID" ng-model="vm.timeMode" ng-true-value="'utc'" ng-false-value="'local'">
                    Show UTC time
                </label>
            </div>
        </div>
    </div>
</div>

        <div class="alert alert-warning" ng-if="vm.hasLogs != undefined && !vm.hasLogs">
            No record found
        </div>
        <div ng-if="vm.hasLogs">
            <table class="table table-bordered table-hover table-condensed">
                <thead>
                    <tr>
                        <th ng-repeat="column in vm.columns">{{column}}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="call in vm.calls">
                        <td>{{call.logDate  | date : 'yyyy-MM-dd hh:mm:ss.sss a' }}</td>
                        <td>{{call.logDate  | date : 'yyyy-MM-dd hh:mm:ss.sss a' : 'UTC' }}</td>
                        <td>{{call.clientId }}</td>
                        <td>{{call.applicationName }}</td>
                        <td>
                            <a href="#/calls/{{call.callId}}/logs">
                                {{call.callId}}
                            </a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</script>

<script type="text/ng-template" id="distribution-details">
    <div class="panel panel-default">
        <div class="panel-body">
            <div class="form-inline">
                <div class="form-group">
                    <label>Client ID:</label>
                    <db-client-combobox default-value="vm.clientId" on-select="vm.onClientSelected(clientId)"></db-client-combobox>
                </div> &nbsp;
                <div class="form-group">
                    <label>Contact ID:</label>
                    <input type="text" class="form-control js-call-type" ng-model="vm.contactId" />
                </div>
                <div class="form-group">
                    <button class="btn btn-primary js-refresh" data-loading-text="Searching..." ng-click="vm.refresh()">Search</button>
                </div>
                <div class="form-group">
                    <div style="margin-left:40px; margin-top:15px">
                        <input type="checkbox" ng-click="vm.reverseSorting($event)" /> Show most recent distribution list
                    </div>
                    <div style="margin-left:40px; margin-top:5px">
                        <input type="checkbox" ng-model="vm.timeMode" ng-true-value="'utc'" ng-false-value="'local'" /> Show UTC time
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="hanzoData">
        <div>
            <h2>{{vm.getDistributionType(vm.firstAttempt.ConsumerType)}} Distribution Overview</h2>
            <table class="table-condensed">
                <tr>
                    <th ng-show="vm.timeMode == 'local'" scope="row">Local Time:</th>
                    <td ng-show="vm.timeMode == 'local'">{{vm.firstAttempt.CreateDate  | date : 'yyyy-MM-dd hh:mm:ss.sss a' }}</td>
                    <th ng-show="vm.timeMode == 'utc'" scope="row">UTC Time:</th>
                    <td ng-show="vm.timeMode == 'utc'">{{vm.firstAttempt.CreateDate  | date : 'yyyy-MM-dd hh:mm:ss.sss a' : 'UTC' }}</td>
                    <th scope="row">Agent ID:</th>
                    <td>{{vm.firstAttempt.AgentId}}</td>
                    <th scopy="row">Query/Call ID:</th>
                    <td><a href="#/calls/{{vm.firstAttempt.QueryId}}/logs">{{vm.firstAttempt.QueryId}}</a></td>
                </tr>
            </table>
        </div>

        <div class="attempt" ng-repeat="attempt in vm.distributionData">
            <div>
                <h3>Distribution Attempt {{attempt.position}}</h3>
                <table class="table-condensed">
                    <tr>
                        <th ng-show="vm.timeMode == 'local'" scope="row">Local Time:</th>
                        <td ng-show="vm.timeMode == 'local'">{{attempt.CreateDate  | date : 'yyyy-MM-dd hh:mm:ss.sss a' }}</td>
                        <th ng-show="vm.timeMode == 'utc'" scope="row">UTC Time:</th>
                        <td ng-show="vm.timeMode == 'utc'">{{attempt.CreateDate  | date : 'yyyy-MM-dd hh:mm:ss.sss a' : 'UTC' }}</td>
                        <th scope="row">Total Time to Evaluate:</th>
                        <td>{{attempt.TotalTimeToEvaluate}} ms</td>
                    </tr>
                    <tr>
                        <th scope="row">Eligible Program IDs:</th>
                        <td>{{attempt.EligibleProgramIds}} </td>
                        <th scope="row">Time to Evaluate Eligible Programs:</th>
                        <td> {{attempt.TimeToEvaluateEligiblePrograms}} ms</td>
                    </tr>
                </table>
            </div>

            <div class="program" ng-repeat="program in attempt.DistributionProgramAttempts">
                <div>
                    <h4>Program {{program.position}}: {{program.NotificationType}} (#{{program.ProgramId}})</h4>
                    <table class="table-condensed">
                        <tr>
                            <th ng-show="vm.timeMode == 'local'" scope="row">Local Time:</th>
                            <td ng-show="vm.timeMode == 'local'">{{program.CreateDate  | date : 'yyyy-MM-dd hh:mm:ss.sss a' }}</td>
                            <th ng-show="vm.timeMode == 'utc'" scope="row">UTC Time:</th>
                            <td ng-show="vm.timeMode == 'utc'">{{program.CreateDate  | date : 'yyyy-MM-dd hh:mm:ss.sss a' : 'UTC' }}</td>
                            <th scope="row">Time To Evaluate Agents:</th>
                            <td>{{program.TimeToEvaluateAgents}} </td>
                        </tr>
                    </table>
                </div>
                <div class="programAgentStep">
                    <table ng-if="program.DistributionProgramAgentSteps.length > 0" class="table-bordered table-hover table-condensed">
                        <tr>
                            <th>Agent ID</th>
                            <th ng-show="vm.timeMode == 'local'">Local Time</th>
                            <th ng-show="vm.timeMode == 'utc'">UTC Time</th>
                            <th>Step</th>
                            <th>Data</th>
                        </tr>
                        <tr ng-repeat="agent in program.DistributionProgramAgentSteps">
                            <td>
                                <a href="#/agent/distribution/clientId/{{vm.clientId}}/agentId/{{agent.AgentId}}/orderBy/ASC/startDate/{{vm.getStartDate(agent.CreateDate)}}/endDate/{{vm.getEndDate(agent.CreateDate)}}">
                                    {{agent.AgentId}}
                                </a>
                           </td>
                            <td ng-show="vm.timeMode == 'local'">{{agent.CreateDate  | date : 'yyyy-MM-dd hh:mm:ss.sss a' }}</td>
                            <td ng-show="vm.timeMode == 'utc'">{{agent.CreateDate  | date : 'yyyy-MM-dd hh:mm:ss.sss a' : 'UTC' }}</td>
                            <td>{{agent.Step}}</td>
                            <td ng-if="agent.StepData.length == 36" ><a href="#/calls/{{agent.StepData}}/logs">{{agent.StepData}}</a></td>
                            <td ng-if="agent.StepData.length != 36">{{vm.getFormattedStepData(agent.StepData)}}</td>
                        </tr>
                    </table>

                    <div ng-if="program.DistributionProgramAgentSteps.length == 0">
                        No eligible agents
                    </div>
                </div>
            </div>
        </div>
    </div>
</script>

<script type="text/ng-template" id="recipient-queries">
    <div>
        <div class="alert alert-danger" ng-show="vm.alertMsg">{{vm.alertMsg}}</div>
        <div class="panel panel-default">
            <div class="panel-body">
                <div class="form-inline">
                    <div class="form-group">
                        <label>Client</label>
                        <db-client-combobox default-value="vm.clientId" on-select="vm.onClientSelected(clientId)"></db-client-combobox>
                    </div>
                    <div class="form-group">
                        <label>Call Type</label>
                        <db-combobox list="vm.consumerTypes"
                                     default-value="vm.consumerType"
                                     on-select="vm.onConsumerTypeSelected(value)"
                                     mode="shortlist"></db-combobox>
                    </div>
                    <button class="btn btn-primary js-refresh" data-loading-text="Refreshing..." db-click="vm.refresh()">Refresh</button>
                    <div class="pull-right">
                        <a href="#/recipientquerysummary">back to summary</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="alert alert-warning" ng-show="vm.recipientQueries == null">Not found</div>
        <div>
            <h4>Summary</h4>
            <div class="row">
                <div class="col-lg-3">
                    <table class="table table-bordered table-hover">
                        <tbody ng-repeat="(key, value) in vm.summary">
                            <tr>
                                <td>Total Number of {{key}}</td>
                                <td>{{value}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="col-lg-9"></div>
            </div>
        </div>
        <div ng-repeat="(key, value) in vm.recipientQueries" ng-show="vm.consumerType == 'All' || vm.consumerType == key">
            <h4>{{key}}</h4>
            <table class="table table-bordered table-hover table-sortable" at-table at-list="value">
                <thead></thead>
                <tbody>
                    <tr>
                        <td at-attribute="createDateUtc" at-title="Create Date" at-sortable at-initial-sorting="desc">
                            {{item.createDateUtc | date : 'yyyy-MM-dd hh:mm:ss a' }}
                        </td>
                        <td at-sortable at-title="Recipient Query ID" at-attribute="id">
                            <a href="#/calls/{{item.id}}/logs" ng-if="!vm.isShotgunPush(item.id)">
                                {{item.id}}
                            </a>
                            <span ng-if="vm.isShotgunPush(item.id)">
                                {{item.id}}
                            </span>
                        </td>
                        <td at-sortable at-title="Lead ID" at-implicit at-attribute="contactId"></td>
                        <td at-sortable at-title="Program ID" at-implicit at-attribute="programId"></td>
                        <td at-sortable at-title="Program Type" at-attribute="programType">
                            <a href="#/distribution/clientId/{{vm.clientId}}/contactId/{{item.contactId}}/queryId/{{item.id}}">
                                {{item.programType}}
                            </a>
                        </td>
                        <td at-sortable at-title="Iteration Count" at-implicit at-attribute="iterationCount"></td>
                        <td at-sortable at-title="Redistribution Count" at-implicit at-attribute="redistributionCount"></td>
                        <td at-sortable at-title="Running Redistribution" at-attribute="runningRedistribution">
                            <span class="label label-success" ng-show="item.runningRedistribution">
                                <span class="glyphicon glyphicon-ok"></span>
                            </span>
                        </td>
                        <td>
                            <button type="button" class="btn btn-sm btn-danger" ng-click="vm.removeQuery(item)" ng-hide="item.deleted">DELETE</button>
                            <span class="text-success" ng-show="item.deleted">Deleted</span>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</script>
<script type="text/ng-template" id="recipient-query-summary">
    <div>
        <div class="alert alert-danger" ng-show="vm.alertMsg">{{vm.alertMsg}}</div>
        <div class="pull-right" style="padding-bottom: 10px" ng-if="vm.recipientQuerySummary.length > 0">
            <div>
                <div class="input-group">
                    <input type="text" class="form-control" placeholder="Search for client" ng-model="vm.clientSearchText" ng-change="vm.onClientInputKeyUp()">
                </div><!-- /input-group -->
            </div>
        </div>
        <div class="alert alert-warning" ng-if="vm.recipientQuerySummary != undefined && vm.recipientQuerySummary.length == 0">Not found</div>
        <div ng-if="vm.recipientQuerySummary.length > 0">
            <table class="table table-bordered table-hover table-sortable" at-table at-paginated at-list="vm.recipientQuerySummary" at-config="vm.tableConfig">
                <thead></thead>
                <tbody>
                    <tr>
                        <td at-sortable at-initial-sorting="asc" at-title="Client" at-attribute="clientId">
                            <a href="#/clients/{{item.clientId}}/recipientqueries">{{item.clientId}}</a>
                        </td>
                        <td at-sortable at-title="Inbound Count" at-implicit at-attribute="inboundCount"></td>
                        <td at-sortable at-title="Shotgun Count" at-implicit at-attribute="shotgunCount"></td>
                        <td at-sortable at-title="Transfer Count" at-implicit at-attribute="transferCount"></td>
                    </tr>
                </tbody>
            </table>
            <at-pagination class="pull-right" at-list="vm.recipientQuerySummary" at-config="vm.tableConfig"></at-pagination>
        </div>
    </div>
</script>
<script type="text/ng-template" id="combobox-virtual-scroll">
    <div class="input-group combobox dropdown">
        <input type="text" class="form-control" placeholder="{{placeholder}}" data-toggle="dropdown"
               ng-model="itemSelected"
               ng-change="onInputKeyUp()"
               ng-focus="onInputFocus()"/>
        <span class="input-group-addon dropdown-toggle btn" id="combobox-list" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
            <span class="caret"></span>
        </span>
        <ul class="dropdown-menu" aria-labelledby="combobox-list">
            <div class="sf-viewport sf-viewport-biglist real" ng-if="mode == 'longlist'">
                <div>
                    <li sf-virtual-repeat="item in list"><a ng-click="onItemSelected(item)">{{item}}</a></li>
                </div>
            </div>
            <div ng-if="mode == 'shortlist'">
                <li ng-repeat="item in list"><a ng-click="onItemSelected(item)">{{item}}</a></li>
            </div>
        </ul>
    </div>
</script>
<link rel="stylesheet" href="/Content/voiceBase-sdk/css/jquery-ui-1.10.4.custom.min.css" />
<link rel="stylesheet" href="/Content/voiceBase-sdk/css/jwplayer.vb-sdk-plugin.css" />

<script type="text/javascript" src="/Content/voiceBase-sdk/js/lib/fuse.min.js"></script>
<script type="text/javascript" src="/Content/voiceBase-sdk/js/jquery.voicebase.js"></script>
<script type="text/javascript" src="/Content/voiceBase-sdk/js/lib/jquery.zclip.js"></script>
<script src="//jwpsrv.com/library/qhNfTJFiEeK7LSIACpYGxA.js"></script>

<!-- latest JWPlayer -->
<script type="text/javascript" src="https://app.voicebase.com/js/jwplayer.js"></script>

<script type="text/ng-template" id="voiceBase-player">

    <table class="table table-bordered table-responsive">
        <tr>
            <th>Status</th>
            <td>{{vm.status}}</td>
        </tr>
        <tr>
            <th>MediaId</th>
            <td>{{vm.mediaId}}</td>
        </tr>

        <tr>
            <th>ClientId</th>
            <td>{{vm.metadata.extended.clientId}}</td>
        </tr>
        <tr>
            <th>AgentId</th>
            <td>{{vm.metadata.extended.agentId}}</td>
        </tr>
        <tr>
            <th>CallId</th>
            <td><a href="#/calls/{{vm.metadata.extended.callId}}/logs">{{vm.metadata.extended.callId}}</a></td>
        </tr>
        <tr>
            <th>ContactId</th>
            <td>{{vm.metadata.extended.contactId}}</td>
        </tr>
        <tr>
            <th>MediaUrl</th>
            <td nowrap><a href="{{vm.metadata.extended.mediaUrl}}" target="media{{ProviderLegId}}">{{vm.metadata.extended.mediaUrl}}</a></td>
        </tr>
        <tr>
            <th>ProviderLegId</th>
            <td nowrap><a href="#/twilio/{{vm.metadata.external.id}}/logs">{{vm.metadata.external.id}}</a></td>
        </tr>
    </table>
    <div class="content" style="width:840px; margin: 0 auto">
        <div id="jwplayer">
            You need Flash player 8+ and JavaScript enabled to view this content.
        </div>
    </div>
</script>


<script type="text/ng-template" id="agent-states" ng-controller="agentstate">
    <div>
        <div class="panel panel-default">
            <div class="panel-body">
                <div class="form-inline col-lg-9">
                    <div class="form-group">
                        <label> Client: </label>
                        <db-client-combobox default-value="vm.clientId" on-select="vm.onClientSelected(clientId)"></db-client-combobox>
                    </div>
                    <div class="form-group">
                        <label style="margin-left:30px"> View as Agent ID: </label>
                        <input type="number" class="form-control" id="agentId" size="45" placeholder="Enter ID" ng-model="vm.agentId" />
                    </div>
                    <button class="btn btn-primary js-refresh" data-loading-text="Searching..." style="margin-left:30px" ng-click="vm.refresh()">Load Agents</button>
                </div>
                <div class="col-lg-1 col-lg-offset-2">
                    <div class="checkbox">
                        <label>
                            <input type="checkbox" value="pull" ng-model="vm.model" ng-true-value="'push'" ng-false-value="'pull'" ng-click="vm.onModelChange()">
                            Push Model
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <div style="overflow:hidden; display: block">
            <div style="background-color:green; width: 20px; height: 20px; float:left"/>
            <div style="float:left; margin-left:5px"><label>On Call</label></div>
            <div style="background-color:orange; width: 20px; height: 20px; float:left; margin-left:10px" />
            <div style="float:left; margin-left:5px"><label>Available</label></div>
            <div style="background-color:red; width: 20px; height: 20px; float:left; margin-left:10px" />
            <div style="float:left; margin-left:5px"><label>Unavailable</label></div>
            <div style="background-color:gray; width: 20px; height: 20px; float:left; margin-left:10px" />
            <div style="float:left; margin-left:5px"><label>Unknown</label></div>
        </div>
        <div class="alert alert-danger" style="margin-top:10px" ng-show="vm.alertMsg">{{vm.alertMsg}}</div>
        <div id="CoreServiceDiv" style="overflow:hidden; display:block">
        </div>
    </div>
</script>

<script type="text/ng-template" id="agent-status">
    <div>
        <div class="alert alert-danger" ng-show="vm.alertMsg">{{vm.alertMsg}}</div>
        <div class="panel panel-default">
            <div class="panel-body">
                <div class="form-inline col-lg-9">
                    <div class="form-group">
                        <label>Client ID</label>
                        <db-client-combobox default-value="vm.clientId" on-select="vm.onClientSelected(clientId)"></db-client-combobox>
                    </div>
                    <div class="form-group">
                        <label style="margin-left:30px">Agent ID</label>
                        <input type="number" class="form-control js-call-source" ng-model="vm.agentId" />
                    </div>
                    <div class="form-group">
                        <label style="margin-left:30px">Minimum Minutes On Call</label>
                        <input type="number" class="form-control js-call-type" ng-model="vm.MinutesOnCall" value="120" />
                    </div>
                    <button class="btn btn-primary js-refresh" data-loading-text="Searching..." db-click="vm.refresh()" style="margin-left:30px">Search</button>
                </div>
                <div class="col-lg-1 col-lg-offset-2">
                    <div class="checkbox">
                        <label>
                            <input type="checkbox" value="local" ng-model="vm.timeMode" ng-true-value="'utc'" ng-false-value="'local'">
                            Show UTC time
                        </label>
                    </div>
                    <div class="checkbox">
                        <label>
                            <input type="checkbox" ng-model="vm.showStuckAgentsOnly" />
                            Show Stuck Agents Only
                        </label>
                    </div>
                </div>
            </div>
        </div>
        <h4>Agent Status</h4>
        <div class="panel panel-default" ng-show="vm.agents.length > 0">
            <div class="panel-body">
                <table class="table table-bordered table-hover table-condensed" ng-show="vm.agents.length > 0">
                    <thead>
                        <tr>
                            <th style="text-align: center" ng-repeat="column in vm.columns">{{column}}</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="agent in vm.agents track by $index" ng-click="agent.active = !agent.active" ng-class="{highlight: agent.active}" ng-hide="vm.showStuckAgentsOnly == true && !agent.isStuck">
                            <td style="text-align: center">
                                <span ng-show="vm.timeMode == 'local'">{{agent.updateDate   | date : 'yyyy-MM-dd hh:mm:ss.sss a' }}</span>
                                <span ng-show="vm.timeMode == 'utc'">{{agent.updateDate  | date : 'yyyy-MM-dd hh:mm:ss.sss a' : 'UTC' }}</span>
                            </td>
                            <td style="text-align: center">{{agent.clientId}}</td>
                            <td style="text-align: center">{{agent.agentId}}</td>
                            <td style="text-align: center">
                                <a href="#/calls/{{agent.callId}}/logs" target="_blank" ng-if="agent.callId">
                                    {{agent.callId}}
                                </a>
                            </td>
                            <td style="text-align: center">
                                <a href="#/legs/{{agent.legId}}/logs" target="_blank" ng-if="agent.legId">
                                    {{agent.legId}}
                                </a>
                            </td>
                            <td style="text-align: center">
                                {{agent.callStatus}}
                                <div ng-if="agent.twilioErrorCodes && agent.twilioErrorCodes.length > 0">
                                    <span class="text-danger" ng-repeat="errorCode in agent.twilioErrorCodes" style="text-align: center">
                                        <a href="https://www.twilio.com/docs/api/errors/{{errorCode}}" target="_blank" ng-if="errorCode">
                                            {{errorCode}}
                                        </a>
                                    </span>
                                </div>
                            </td>
                            <td style="text-align: center">
                                <button class="btn btn-primary js-refresh" data-loading-text="Clearing..." db-click="vm.clear(agent)" ng-show="agent.isStuck">Clear</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

</script>

            </div>
        </div>



    <script src="/bundles/common/js?v=zhAhdhuCazW2l6Wr5IMFuv3YrDhGU8lX38Sv8csZdBo1"> </script>

    <script src="/bundles/site/js?v=sBbn9BVN8ELlbmUuHnkUtkcbkQom1WG4ZcYzcPDBlRk1"></script>

        <script>
            google.load("visualization", "1", { packages: ["corechart"] });
        </script>
    </body>
</html>
